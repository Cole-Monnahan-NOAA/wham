<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Woods Hole Assessment Model (WHAM) • wham</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Woods Hole Assessment Model (WHAM)">
<meta property="og:description" content='The Woods Hole Assessment Model (WHAM) is a state-space age-structured 
  stock assessment model that can include environmental effects on population processes.
  WHAM can be configured to estimate a range of assessment models: a traditional 
  statistical catch-at-age (SCAA) model with recruitments as fixed effects, SCAA with 
  recruitments as random effects, or a "full state-space" model with abundance at all ages treated 
  as random effects. WHAM is a generalization of the R and TMB code from Miller et al. 
  (2016), Miller and Hyun (2018), and Miller et al. (2018). WHAM also has many similarities of 
  input data sources with ASAP (Legault and Restrepo 1999) and provides functions to generate a WHAM input file 
  from an ASAP3 dat file. Many of the plotting functions for input data, results, and 
  diagnostics are modified from ASAP code written by Chris Legault and Liz Brooks.'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">wham</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book fa-lg"></span>
     
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/index.html">Overview</a>
    </li>
    <li>
      <a href="articles/ex1_basics.html">Ex 1: The basics</a>
    </li>
    <li>
      <a href="articles/ex2_CPI_recruitment.html">Ex 2: Recruitment linked to an environmental covariate (Cold Pool Index)</a>
    </li>
    <li>
      <a href="articles/ex3_projections.html">Ex 3: Projecting / forecasting random effects</a>
    </li>
    <li>
      <a href="articles/ex4_selectivity.html">Ex 4: Selectivity with time- and age-varying random effects</a>
    </li>
    <li>
      <a href="articles/ex5_GSI_M.html">Ex 5: Time-varying natural mortality linked to the Gulf Stream Index</a>
    </li>
    <li>
      <a href="articles/ex6_NAA.html">Ex 6: Numbers-at-age / survival deviations as random effects</a>
    </li>
    <li>
      <a href="articles/ex7_debug.html">Ex 7: Debugging WHAM models</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">
    <span class="far fa-file-code fa-lg"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="https://github.com/timjmiller/wham/">
    <span class="fab fa-github fa-lg"></span>
     
    Source code
  </a>
</li>
<li>
  <a href="news/index.html">
    <span class="fas fa-bullhorn fa-lg"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/timjmiller/wham/issues/">
    <span class="fas fa-question-circle fa-lg"></span>
     
    Issues
  </a>
</li>
<li>
  <a href="https://www.fisheries.noaa.gov/contact/timothy-miller-phd">
    <span class="fas fa-paper-plane fa-lg"></span>
     
    Contact
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="wham-a-state-space-age-structured-assessment-model" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#wham-a-state-space-age-structured-assessment-model" class="anchor"></a>WHAM: a state-space age-structured assessment model</h1></div>
<p>The Woods Hole Assessment Model (WHAM) is a general state-space age-structured stock assessment framework designed to include environmental effects on population processes. The state-space framework is attractive because it can estimate observation and process error, as well as naturally propagate random effect parameters in stock projections. WHAM can be configured to estimate a range of assessment models (see <a href="https://timjmiller.github.io/wham/articles/ex1_basics.html">Ex 1</a> and <a href="https://timjmiller.github.io/wham/articles/ex6_NAA.html">Ex 6</a>):</p>
<ul>
<li>statistical catch-at-age (SCAA) model with recruitments as fixed effects,</li>
<li>SCAA with recruitments as random effects</li>
<li>“full state-space model”, abundance at all ages are random effects</li>
</ul>
<p>WHAM advances fisheries assessment because it can estimate constrained random deviations, i.e. random effects, on parameters such as:</p>
<ul>
<li>recruitment / numbers-at-age (<a href="https://timjmiller.github.io/wham/articles/ex2_CPI_recruitment.html">Ex 2</a> and <a href="https://timjmiller.github.io/wham/articles/ex6_NAA.html">Ex 6</a>),</li>
<li>selectivity (<a href="https://timjmiller.github.io/wham/articles/ex4_selectivity.html">Ex 4</a>),</li>
<li>natural mortality (<a href="https://timjmiller.github.io/wham/articles/ex5_GSI_M.html">Ex 5</a>), and</li>
<li>environmental effects on the above (<a href="https://timjmiller.github.io/wham/articles/ex2_CPI_recruitment.html">Ex 2</a> and <a href="https://timjmiller.github.io/wham/articles/ex5_GSI_M.html">Ex 5</a>)</li>
</ul>
<p>A nice property of treating population and environmental processes as random effects is that their uncertainty is naturally propagated in projections/forecasts (<a href="https://timjmiller.github.io/wham/articles/ex3_projections.html">Ex 3</a>).</p>
<p>Overview of WHAM presentation (Jan 8 2021):</p>
<figure class="video_container"><iframe width="560" height="315" src="https://www.youtube.com/embed/o8vJvbIaOdE" frameborder="0" allowfullscreen="true">
</iframe>
</figure><div id="background" class="section level2">
<h2 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h2>
<p>WHAM generalizes and extends R and TMB code from <a href="https://doi.org/10.1139/cjfas-2015-0339">Miller et al. (2016)</a>, <a href="https://doi.org/10.1139/cjfas-2017-0035">Miller and Hyun 2018</a>, and <a href="https://doi.org/10.1139/cjfas-2017-0124">Miller et al. 2018</a>. WHAM has many similarities to ASAP (<a href="https://www.nefsc.noaa.gov/nft/ASAP.html">code</a>, <a href="http://www.ices.dk/sites/pub/Publication%20Reports/Expert%20Group%20Report/acom/2007/WGMHSA/Annex%203%20-%20ICCAT%20Working%20Document.pdf">Legault and Restrepo 1998</a>), including the input data file structure. Many of the plotting functions for input data, results, and diagnostics are modified from ASAP code written by Chris Legault and Liz Brooks (<a href="https://github.com/cmlegault/ASAPplots">ASAPplots</a>).</p>
<p>WHAM is written in R and TMB, and would not be possible without these superb open-source tools. For more information, see:</p>
<ul>
<li>R: <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>
</li>
<li>TMB: <a href="https://kaskr.github.io/adcomp/_book/Introduction.html" class="uri">https://kaskr.github.io/adcomp/_book/Introduction.html</a>
</li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<pre><code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">devtools::install_github("timjmiller/wham", dependencies=TRUE)</a></code></pre>
</div>
<div id="tutorial" class="section level2">
<h2 class="hasAnchor">
<a href="#tutorial" class="anchor"></a>Tutorial</h2>
<p>We suggest walking through the vignettes to familiarize yourself with WHAM: <a href="https://timjmiller.github.io/wham/articles" class="uri">https://timjmiller.github.io/wham/articles</a>.</p>
<p>Clean, runnable <code>.R</code> scripts for each vignette are also available in the <code>example_scripts</code> folder of the <code>wham</code> package install:</p>
<pre><code><a href="https://timjmiller.github.io/wham/">library(wham)
wham.dir &lt;- find.package("wham")
file.path(wham.dir, "example_scripts")</a></code></pre>
<p>You can then run the entire first example script with:</p>
<pre><code><a href="https://rdrr.io/r/base/getwd.html">setwd("choose/where/to/save/output")
source(file.path(wham.dir, "example_scripts", "ex1_SNEMA_yellowtail_flounder.R"))</a></code></pre>
<p>You can run ALL examples with (takes 1 hour):</p>
<pre><code><a href="https://timjmiller.github.io/wham/">library(wham)
wham.dir &lt;- find.package("wham")
source(file.path(wham.dir, "example_scripts", "run_all_examples.R"))</a></code></pre>
</div>
<div id="install-details" class="section level2">
<h2 class="hasAnchor">
<a href="#install-details" class="anchor"></a>Install details</h2>
<p>Installation from GitHub does not include the vignettes by default because they can be accessed online anytime at <a href="https://timjmiller.github.io/wham/articles" class="uri">https://timjmiller.github.io/wham/articles</a>. If you want to build the vignettes locally, they look best if you <em>build using R Studio</em>:</p>
<pre><code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">devtools::install_github("timjmiller/wham", dependencies=TRUE, build_vignettes = TRUE, build_opts = c("--no-resave-data", "--no-manual"))</a></code></pre>
<p>View installed vignettes:</p>
<pre><code><a href="https://rdrr.io/r/utils/browseVignettes.html">browseVignettes("wham")</a></code></pre>
<p>If you’re having problems with dependencies not installing, you can try:</p>
<pre><code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">devtools::install_github("kaskr/adcomp/TMB", dependencies=TRUE)
devtools::install_github("kaskr/TMB_contrib_R/TMBhelper")
to.install &lt;- c("plotrix","ellipse","Hmisc","gplots","fields","RColorBrewer","colorspace","mnormt","Deriv","tidyr","dplyr","ggplot2","viridis")
new.packages &lt;- to.install[!(to.install %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)</a></code></pre>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<blockquote>
<p>Kristensen, K., Nielsen, A., Berg, C. W., Skaug, H., and Bell, B. M. 2016. TMB: Automatic differentiation and Laplace approximation. Journal of Statistical Software 70(5): 1–21. doi: 10.18637/jss.v070.i05.</p>
</blockquote>
<blockquote>
<p>Legault, C. M. and Restrepo, V. R. 1998. A flexible forward age-structured assessment program. ICCAT. Col. Vol. Sci. Pap. 49: 246-253.</p>
</blockquote>
<blockquote>
<p>Miller, T. J., Hare, J. A., and Alade, L. A. 2016. A state-space approach to incorporating environmental effects on recruitment in an age-structured assessment model with an application to Southern New England yellowtail flounder. Canadian Journal of Fisheries and Aquatic Sciences 73(8): 1261-1270. doi: 10.1139/cjfas-2015-0339</p>
</blockquote>
<blockquote>
<p>Miller, T. J. and Hyun, S-Y. 2018. Evaluating evidence for alternative natural mortality and process error assumptions using a state-space, age-structured assessment model. Canadian Journal of Fisheries and Aquatic Sciences 75(5): 691-703. doi: 10.1139/cjfas-2017-0035</p>
</blockquote>
<blockquote>
<p>Miller, T. J., O’Brien, L., and Fratantoni, P. S. 2018. Temporal and environmental variation in growth and maturity and effects on management reference points of Georges Bank Atlantic cod. Canadian Journal of Fisheries and Aquatic Sciences 75(12): 2159-2171. doi: 10.1139/cjfas-2017-0124</p>
</blockquote>
<blockquote>
<p>R Core Team. 2020. R: A Language and Environment for Statistical Computing. R Foundation for Statistical Computing, Vienna, Austria. <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a></p>
</blockquote>
</div>
<div id="noaa-disclaimer" class="section level2">
<h2 class="hasAnchor">
<a href="#noaa-disclaimer" class="anchor"></a>NOAA Disclaimer</h2>
<p>This repository is a scientific product and is not official communication of the National Oceanic and Atmospheric Administration, or the United States Department of Commerce. All NOAA GitHub project code is provided on an ‘as is’ basis and the user assumes responsibility for its use. Any claims against the Department of Commerce or Department of Commerce bureaus stemming from the use of this GitHub project will be governed by all applicable Federal law. Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation or favoring by the Department of Commerce. The Department of Commerce seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by DOC or the United States Government.</p>
<!-- badges: start -->

<!-- badges: end -->
<footer><a href="https://www.fisheries.noaa.gov/"><img src="reference/figures/noaa-fisheries-rgb-2line-horizontal-small.png" height="75" alt="NOAA Fisheries"></a>
<div class="mywrap_center">
<a class="mylink line" href="https://www.commerce.gov/">U.S. Department of Commerce</a> <a class="mylink line" href="https://www.noaa.gov">National Oceanographic and Atmospheric Administration</a> <a class="mylink" href="https://www.fisheries.noaa.gov/">NOAA Fisheries</a>
</div>
</footer><!-- <div class ="attribution">Icons by icons8 https://icons8.com/</div>  -->
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/timjmiller/wham/">https://​github.com/​timjmiller/​wham/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/timjmiller/wham/issues">https://​github.com/​timjmiller/​wham/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing wham</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Tim Miller <br><small class="roles"> Author </small>  </li>
<li>Brian Stock <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="active badge svg"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Tim Miller, Brian Stock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
